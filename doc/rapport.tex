\input{preambule}

%%% Begin document
\begin{document}
\includepdf[pages={1}]{title.pdf}

% Liste des TODOs
%\listoftodos[Modifications du rapport]
%\newpage

\tableofcontents

\listoffigures

\listoftables

\newpage

\part{Livrables}

\section{Déroulement et répartition des tâches}

Durant ce projet, nous devions implémenter un analyseur et interpréteur du langage de programmation \textit{lutin}. Pour ce faire, nous avons suivi les étapes de travail proposées dans le sujet en attribuant des membres sur chacune d'elles, permettant ainsi de les paralléliser. \\

Dans un premier temps, tout le monde a réfléchi à la grammaire du langage, puis nous avons choisi celle qui était la plus simple et la plus compréhensible par l'équipe. Nous l'avons ensuite transformé en grammaire LR, visible dans la section \ref{sec:grammaire}. \\

Puis nous avons avancé en parallèle sur les tâches suivantes avant d'implémenter :
\begin{itemize}
	\item Construction de l'automate LR correspondant (voir section \ref{sec:automate}) puis réalisation de la table des transitions (voir section \ref{sec:transitions}) (par Jonathan, Nicolas et Romain)
	\item Conception de la structure de données sous forme de diagramme UML \ref{sec:structure} (par Antoine, Pierre et Baptiste)
	\item Identification des expressions régulières (par Benoît) \\
\end{itemize}

Enfin, nous avons procédé à l'implémentation de cet analyseur et interpréteur de la manière suivante :
\begin{itemize}
	\item Implémentation de l'analyseur lexical (par Jonathan)
	\item Implémentation de l'automate LR (par Antoine et Benoît)
	\item Réalisation de l'outil en ligne de commande (par Baptiste)
	\item Vérification statique du programme (par Pierre)
	\item Implémentation de toutes les classes symboles (par Nicolas et Romain)
	\item Conception de la partie optimisation et son implémentation (par Pierre et Baptiste)
	\item Conception et réalisation de la partie affichage en mémoire du programme (par Jonathan)
	\item Mise en place des gestions d'erreurs lexicales et syntaxiques et récupération (par Antoine, Benoît et Pierre)
	\item Implémentation des tests (par toute l'équipe)\\
\end{itemize}

A titre indicatif, pour terminer ce projet nous avons passé en dehors des séances, 8 heures en moyenne chacun.

\newpage

\section{Grammaire du langage lutin}
\label{sec:grammaire}

Vous trouverez dans le tableau ci-dessous (cf tableau \ref{tab:grammaire}), l'ensemble des règles de notre grammaire pour le langage lutin numéroté pour faciliter la compréhension de la table de transition (voir section \ref{sec:transitions}). Le symbole $\epsilon$ représente L’élément vide.

\begin{table}[h]
	\centering
	\begin{tabular}{|c|l c l|}
		\hline
		Numéro & \multicolumn{3}{c|}{Règle} \\
		\hline
		1 & P & $\rightarrow$ & D I \\
		2 & D & $\rightarrow$ & D D’ \\
		3 & D & $\rightarrow$ & $\epsilon$ \\
		4 & D’ & $\rightarrow$ & var V ; \\
		5 & D’ & $\rightarrow$ & const C ; \\
		6 & V & $\rightarrow$ & V , id \\
		7 & V & $\rightarrow$ & id \\
		8 & C & $\rightarrow$ & C , id = val \\
		9 & C & $\rightarrow$ & id = val \\
		10 & I & $\rightarrow$ & I I’ \\
		11 & I & $\rightarrow$ & I’ \\
		12 & I’ & $\rightarrow$ & lire id ; \\
		13 & I’ & $\rightarrow$ & ecrire E ; \\
		14 & I’ & $\rightarrow$ & id := E ; \\
		15 & E & $\rightarrow$ & E + E \\
		16 & E & $\rightarrow$ & E * E \\
		17 & E & $\rightarrow$ & E - E \\
		18 & E & $\rightarrow$ & E / E \\
		19 & E & $\rightarrow$ & ( E ) \\
		20 & E & $\rightarrow$ & id \\
		21 & E & $\rightarrow$ & val \\
		\hline
	\end{tabular}
	\caption{Grammaire du langage lutin}
	\label{tab:grammaire}
\end{table}

%% Section : Automate LR
\afterpage{
	\clearpage
	\KOMAoptions{paper=A3,pagesize,paper=landscape,DIV=20}
	\recalctypearea
	\section{Automate LR}
	\label{sec:automate}

	Vous trouverez ci-dessous (cf figure \ref{fig:automate}) le schéma décrivant l'automate LR de notre grammaire afin d'identifier les différents états et transitions avant l'implémentation.
	
	\begin{figure}[H]
		\centerline{
			\includegraphics[height=0.85\textheight,width=1.0\textwidth,keepaspectratio]{figures/automate-LR-lutin.jpg}
		}
		\caption{Automate LR par rapport à la grammaire du langage lutin}
		\label{fig:automate}
	\end{figure}

	\clearpage
	\KOMAoptions{paper=A4,pagesize}
	\recalctypearea
}

%% Section : Table des transitions LR
\afterpage{
	\clearpage
	\KOMAoptions{paper=A3,pagesize,paper=landscape,DIV=20}
	\recalctypearea
	\section{Table des transitions LR}
	\label{sec:transitions}

	Avant d'implémenter l'ensemble des états, nous avons réalisé une table référençant toutes les transitions possibles d'un état à un autre en fonction des symboles analysés. Voici cette table de transition LR (cf tableau \ref{tab:transitions}).
	
	\begin{table}[H]
		\centering
		\csvautotabular[respect dollar=true]{data/table-analyse-automate-lr.csv}
		\label{tab:transitions}
		\caption{Table des transitions LR}
	\end{table}

	\clearpage
	\KOMAoptions{paper=A4,pagesize}
	\recalctypearea
}

%% Section : Structures de données
\afterpage{
	\clearpage
	\KOMAoptions{paper=A3,pagesize,paper=landscape,DIV=20}
	\recalctypearea
	\section{Structures de données}
	\label{sec:structure}
	
	Afin de décrire au mieux la structure employée dans ce projet, vous trouverez ci-dessous le diagramme de classe simplifié dans le standard UML (cf figure \ref{fig:structure}). En effet, afin de le rendre plus compréhensible, seules les méthodes les plus importantes de chaque classe sont visibles (destructeurs, accesseurs, et mutateurs ne sont pas affichés). De plus les classes de type exception sont regroupé dans un package (le détail de ces classes est visible dans la figure \ref{fig:erreur-structure} en annexe ainsi que la liste des erreurs prises en charge dans le tableau \ref{tab:erreurs-liste} en annexe). Vous trouverez en annexe (cf figure \ref{fig:full-structure}) le diagramme de classe complet du programme.

	\begin{figure}[H]
		\centerline{
			\includegraphics[width=1.15\textwidth,keepaspectratio]{../diagrams-simplified/class/lutin-compiler-class-diagram-simplified-uml.png}
		}
		\label{fig:structure}
		\caption{Diagramme de classe des structures de données}
	\end{figure}

	\clearpage
	\KOMAoptions{paper=A4,pagesize}
	\recalctypearea
}

% Annexes
\afterpage{
	\clearpage
	\KOMAoptions{paper=A3,pagesize,paper=landscape,DIV=20}
	\recalctypearea
	
	\part{Annexes}
	
	\section{Gestion des erreurs}
	\label{sec:erreurs}
	
	\subsection{Listes des erreurs traitées}
	\label{subsec:erreur-liste}	
	
	\begin{table}[h]
		\centering
		\begin{tabular}{|c|c|c|}
			\hline
			\textbf{Erreur} & \textbf{Type} & \textbf{Code de retour} \\
			\hline
			ERROR\_SEMANTIC\_VAR\_NOT\_USED & Semantic Warning & None \\
			\hline
			ERROR\_WRONG\_ARGUMENTS & Arguments & 1 \\
			\hline
			ERROR\_FILE\_NOT\_FOUND & I/O & 2 \\
			\hline
			ERROR\_SEMANTIC\_VAR\_ALREADY\_DECLARED & Semtantic & 3 \\
			\hline
			ERROR\_SEMANTIC\_VAR\_NOT\_DECLARED & Semantic & 4 \\
			\hline
			ERROR\_SEMANTIC\_VAR\_IS\_CONST & Semantic & 5 \\
			\hline
			ERROR\_SEMANTIC\_VAR\_NOT\_INITIALIZED & Semantic & 6 \\
			\hline
			ERROR\_LEXICAL\_UNKNOWN\_SYMBOL & Lexical & 7 \\
			\hline
			ERROR\_LEXICAL\_UNEXPECTED\_SYMBOL & Lexical & 8 \\
			\hline
			ERROR\_LEXICAL\_MISSING\_SYMBOL & Lexical & 9 \\
			\hline
			ERROR\_SEMANTIC\_INCORRECT\_NUM\_VALUE & Semantic & 10 \\
			\hline
		\end{tabular}
		\caption{Liste des erreurs prises en compte par le programme}
		\label{tab:erreurs-liste}
	\end{table}
	
	\subsection{Structure des erreurs}
	\label{subsec:erreur-structure}
	
	\begin{figure}[H]
		\centerline{
			\includegraphics[width=1.15\textwidth,keepaspectratio]{../diagrams-simplified/class/exceptions/lutin-compiler-class-diagram-exceptions-uml.png}
		}	
		\caption{Diagramme de classe des exceptions (erreurs)}
		\label{fig:erreur-structure}
	\end{figure}		
	
	\section{Structures de données complète}
	\label{sec:full-structure}
	
	\begin{figure}[H]
		\centerline{
			\includegraphics[width=1.15\textwidth,keepaspectratio]{../diagrams/class/lutin-compiler-class-diagram-uml.png}
		}	
		\label{fig:full-structure}
		\caption{Diagramme de classe des structures de données}
	\end{figure}

	\clearpage
	\KOMAoptions{paper=A4,pagesize}
	\recalctypearea
}

%%% End document
\end{document}
